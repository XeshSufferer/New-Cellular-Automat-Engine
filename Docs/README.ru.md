# New-Cellular-Automat-Engine

[English](README.md) | [Русский](README.ru.md)

## Описание

Данный проект реализует движок для одномерных клеточных автоматов с поддержкой пользовательских правил. Вы можете использовать встроенные правила (Rule22, Rule30, Rule110) или создавать свои собственные в формате JSON.

## Быстрый старт

1. **Клонируйте репозиторий:**
   ```
   git clone https://github.com/XeshSufferer/New-Cellular-Automat-Engine.git
   ```

2. **Откройте проект в Visual Studio или другой IDE с поддержкой C# или используйте Releases файлы**

3. **Настройте параметры:**
   - Измените файл `settings.json` для задания параметров симуляции (размер карты, количество поколений, используемое правило и т.д.).

4. **Добавьте или измените правила:**
   - Для пользовательских правил используйте папку `CustomRules/` и формат файла, описанный ниже.

5. **Соберите и запустите проект:**
   - В Visual Studio: нажмите F5 или выберите "Запуск".
   - В командной строке:
     ```
     dotnet run
     ```

6. **Результаты:**
   - Результаты симуляции будут выведены в консоль.

## Старт если вы НЕ программист


1. **Скачайте нужную вам версию для вашей операционной системы по ссылке https://github.com/XeshSufferer/New-Cellular-Automat-Engine/releases**

2. **Запустите New-Cellular-Automat-Engine.exe**
   - После запуска - закройте если вам требуется настройка или изменение правил. Настройка применяется только при перезапуске


3. **Настройте параметры:**
   - Измените файл `settings.json` для задания параметров симуляции (размер карты, количество поколений, используемое правило и т.д.). Как изменять параметры и какие параметры на что влияют - читайте ниже

4. **Добавьте или измените правила:**
   - Для пользовательских правил используйте папку `CustomRules/` и формат файла, описанный ниже.

5. **После настройки - снова запустите New-Cellular-Automat-Engine.exe ! Настройки применятся**


## Настройка проекта в settings.json

1. **Разбор settings файла**
   - Автоматически сгенерированные стандартные настройки 
   ```json
   {
      "Width":1200,
      "Height":600
      ,"GenerationType":"RandomDot",
      "GenerationCount":100,
      "Delay":100,
      "Rule":"Rule22",
      "JsonMode":false, 
      "JsonRule":"ExampleRule"
   }
   ```

   - 'Width' - Ширина карты симуляции
   - 'Height' - Высота карты симуляции
   - 'GenerationType' - Тип генерации сида (RandomDot, FullSeed, RandomSeed)
   - 'GenerationCount' - Количество генераций
   - 'Delay' - Задержка между генерациями
   - 'Rule' - Название встроенного правила, для демонстрации работы (Из встроенных присутствуют Rule22, Rule30, Rule110 | Будет проигнорированно если JsonMode - true)
   - 'JsonMode' - Включение/отключение чтения JSON правил генерации
   - 'JsonRule' - Name значение пользовательского JSON правила (будет проигнорированно если JsonMode - false) 


## Структура проекта

- `Cell.cs` — описание клетки.
- `Map.cs`, `MapRegenerator.cs` — логика карты и генерации поколений.
- `Rule.cs`, `Rule22.cs`, `Rule30.cs`, `Rule110.cs`, `CustomJsonRule.cs` — реализация правил.
- `CustomRulesReader.cs` — чтение пользовательских правил из JSON.
- `Settings.cs`, `SettingsReader.cs`, `settings.json` — работа с настройками.
- `Writer.cs` — вывод результатов.
- `ExamplesFactory.cs`, `Examples.cs` — система ускоренного прототипирование правил клеточного автомата Examples.

## Как создать пользовательское правило в формате JSON

1. **Создайте файл в папке `CustomRules/`**  
   Например: `MyRule.json`

2. **Структура файла**  
   Пример содержимого:
   ```json
   {
     "Name": "MyRule",
     "WritedConditions": [
       "001",
       "010",
       "100"
     ]
   }
   ```
   - `Name` — уникальное имя правила (строка).
   - `WritedConditions` — массив строк (условий), каждая строка — это комбинация состояний соседей и самой клетки (например, `"001"` означает: левый — 0, центр — 0, правый — 1). Подробнее про условия ниже
   - Если условие выполняется, клетка становится живой (закрашенной).

3. **Укажите правило в настройках**  
   В файле `settings.json`:
   ```json
   {
     // ... другие параметры ...
     "JsonMode": true,
     "JsonRule": "MyRule"
   }
   ```
   - `"JsonMode": true` — включает использование пользовательских правил но стандартные встроенные правила будут проигнорированы.
   - `"JsonRule": "MyRule"` — имя вашего правила (должно совпадать с полем `Name` в JSON).

4. **Запустите проект**  
   Программа автоматически загрузит и применит ваше правило.

**Примечания:**
- Формат условия `"001"` соответствует шаблону: левый, центр, правый (0 — мёртв, 1 — жив).
- Если ни одно условие не выполнено, клетка остаётся/становится мёртвой.
- Для примера смотрите файл `CustomRules/ExampleRule.json`.
- Если установить значение Delay в -1 то следующая симуляция будет запущена по нажатию кнопки.
- Если установить значение GenerationCount в -1 генерация будет продолжаться бесконечно (в пределах установленного поля).

## Условия

**Стандартные условия**

- К стандартным условиям относятся условия формата "001", "100", "010".

- **Важно:** Если вы не знакомы с нотацией клеточных автоматов Вольфрама, рекомендуем изучить основы перед созданием сложных правил.

**Простое объяснение нотации:**
- Трехзначное число: левый сосед | центр | правый сосед
- 0 = мертвая клетка, 1 = живая клетка
- Пример: "001" = левый мертв, центр мертв, правый жив

**Вероятностные условия**

- Вероятностные условия являются любыми условиями (в нашем случае, любыми из стандартных), но срабатывают они с определенным шансом, указанным в названии.

- Формат вероятностных условий определяется следующим форматом {название условия}_p{шанс срабатывания при выполнении условия} . 

- На данный момент для всех стандартных условий актуальны префиксы _p50 , _p75 , _p10 , _p25 на соответственно 50, 75, 10, 25 процентов шанса срабатывания

**Пример**
- Условие "001_p50" выполнится в 50% шансом если стандартное условие "001" будет верно. 


## Лицензия

Проект распространяется под лицензией MIT.

